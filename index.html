<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>100K Mining Nomad</title>
    <!-- Tailwind CSS CDN for easy styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter for a clean, modern look -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a1a1a; /* Dark background for the body */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh; /* Full viewport height */
            padding: 1rem; /* Padding around the content */
        }
        .container {
            max-width: 800px; /* Max width for the content */
            width: 100%;
            background-color: #ffffff; /* White background for the main card */
            border-radius: 1.5rem; /* Rounded corners */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* Subtle shadow */
            padding: 2.5rem; /* Ample padding inside the card */
            text-align: center;
        }
        /* Custom styles for button hover effects */
        .btn-primary {
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .btn-primary:hover {
            background-color: #000000; /* Darker black on hover */
            transform: translateY(-2px); /* Slight lift effect */
        }
        .btn-secondary {
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .btn-secondary:hover {
            background-color: #e65100; /* Darker orange on hover */
            transform: translateY(-2px);
        }
        .quiz-container {
            text-align: left;
        }
        .quiz-question {
            font-size: 1.25rem; /* text-xl */
            font-weight: 600; /* font-semibold */
            color: #ffffff; /* text-white */
            margin-bottom: 1rem;
        }
        .quiz-options label {
            display: block;
            margin-bottom: 0.75rem;
            font-size: 1rem; /* text-base */
            color: #e5e7eb; /* text-gray-200 */
            cursor: pointer;
        }
        .quiz-options input[type="radio"] {
            margin-right: 0.5rem;
        }
        .quiz-navigation button {
            margin-top: 1.5rem;
            margin-right: 1rem;
        }
        .quiz-result {
            margin-top: 1.5rem;
            font-size: 1.125rem; /* text-lg */
            font-weight: 500; /* font-medium */
            color: #ffffff; /* text-white */
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Hero Section -->
        <h1 class="text-4xl md:text-5xl font-bold text-gray-900 leading-tight mb-4 rounded-lg">
            Earn $2,500/Week from Month 1 in Australian Mining!
        </h1>
        <p class="text-lg md:text-xl text-gray-700 mb-8 rounded-lg">
            No experience needed. Save $100K in 3 years while travelling the world. Learn step-by-step how to break into the WA mining industry — earn real money and build financial freedom.
        </p>

        <!-- Lead Magnet Section - High-Vis Orange Theme -->
        <div class="bg-orange-500 p-6 rounded-xl shadow-inner mb-8">
            <h2 class="text-2xl font-semibold text-white mb-4 rounded-lg">
                Grab Your FREE Starter Guide!
            </h2>
            <p class="text-orange-100 mb-6 rounded-lg">
                Discover "How to get your first mining job in WA" with our essential 1-page PDF.
            </p>
            <form id="emailForm" class="flex flex-col md:flex-row gap-4 justify-center items-center">
                <input
                    type="email"
                    id="emailInput"
                    placeholder="Enter your email"
                    class="w-full md:w-2/3 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent text-gray-800"
                    required
                >
                <button
                    type="submit"
                    class="btn-primary bg-black text-orange-300 font-bold py-3 px-6 rounded-lg shadow-md hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-black focus:ring-opacity-75 w-full md:w-1/3"
                >
                    Download Now
                </button>
            </form>
            <p id="formMessage" class="mt-4 text-sm text-orange-100 hidden rounded-lg">
                Thanks for signing up! Check your email for the guide. (Note: In a real deployment, this email would be sent via a service like ConvertKit or MailerLite.)
            </p>
        </div>

        <!-- AI Quick Tip Section - Black Theme -->
        <div class="bg-gray-900 p-6 rounded-xl shadow-inner mb-8">
            <h2 class="text-2xl font-semibold text-white mb-4 rounded-lg">
                Need a Quick Mining Nomad Tip?
            </h2>
            <button
                id="getTipButton"
                class="btn-secondary bg-orange-600 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-opacity-75"
            >
                Get a Tip
            </button>
            <div id="tipDisplay" class="mt-6 p-4 bg-white border border-gray-200 rounded-lg text-gray-800 min-h-[60px] flex items-center justify-center">
                <p>Click the button above to get a quick tip!</p>
            </div>
            <div id="loadingIndicator" class="mt-4 text-gray-400 hidden">
                Loading tip...
            </div>
        </div>

        <!-- Qualification Quiz Section -->
        <div class="bg-gray-900 p-6 rounded-xl shadow-inner quiz-container">
            <h2 class="text-2xl font-semibold text-white mb-6 rounded-lg text-center">
                Are You Ready to Be a Mining Nomad? Take the Quiz!
            </h2>
            <div id="quizContent">
                <!-- Quiz questions will be loaded here by JavaScript -->
            </div>
            <div class="quiz-navigation flex justify-between">
                <button id="prevQuestion" class="btn-secondary bg-gray-700 text-white font-bold py-2 px-4 rounded-lg shadow-md hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-75 hidden">
                    Previous
                </button>
                <button id="nextQuestion" class="btn-secondary bg-orange-600 text-white font-bold py-2 px-4 rounded-lg shadow-md hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-opacity-75">
                    Next
                </button>
                <button id="submitQuiz" class="btn-primary bg-black text-orange-300 font-bold py-2 px-4 rounded-lg shadow-md hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-black focus:ring-opacity-75 hidden">
                    Submit Quiz
                </button>
            </div>
            <div id="quizResult" class="quiz-result text-center mt-4 hidden"></div>
        </div>
    </div>

    <script>
        // JavaScript for form submission and AI tip generation

        // Get elements
        const emailForm = document.getElementById('emailForm');
        const emailInput = document.getElementById('emailInput');
        const formMessage = document.getElementById('formMessage');
        const getTipButton = document.getElementById('getTipButton');
        const tipDisplay = document.getElementById('tipDisplay');
        const loadingIndicator = document.getElementById('loadingIndicator');

        // Handle email form submission
        emailForm.addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent default form submission
            const email = emailInput.value;
            console.log('Email submitted:', email); // Log the email (in a real app, this would send to your email list service)

            // Display success message
            formMessage.textContent = `Thanks for signing up, ${email}! Check your email for the guide. (Note: In a real deployment, this email would be sent via a service like ConvertKit or MailerLite.)`;
            formMessage.classList.remove('hidden');
            emailInput.value = ''; // Clear the input field
            emailInput.disabled = true; // Disable input after submission
            emailForm.querySelector('button').disabled = true; // Disable button
        });

        // Handle AI tip generation
        getTipButton.addEventListener('click', async function() {
            tipDisplay.innerHTML = ''; // Clear previous tip
            loadingIndicator.classList.remove('hidden'); // Show loading indicator
            getTipButton.disabled = true; // Disable button during loading

            try {
                // IMPORTANT: Replace "YOUR_GEMINI_API_KEY_HERE" with your actual Gemini API key.
                // You can get one from Google AI Studio: https://aistudio.google.com/app/apikey
                const apiKey = "YOUR_GEMINI_API_KEY_HERE"; 

                // Ensure the API key is not empty before proceeding
                if (!apiKey || apiKey === "YOUR_GEMINI_API_KEY_HERE") {
                    throw new Error("API Key is missing or not configured. Please replace 'YOUR_GEMINI_API_KEY_HERE' with your actual API key.");
                }

                // UPDATED PROMPT for more specific and actionable tips
                const prompt = `Generate a very short, actionable tip (1-2 sentences) for someone aspiring to be a '100K Mining Nomad' in Western Australia. The tip should focus on practical aspects of the FIFO lifestyle, saving money, adapting to camp life, or securing initial jobs. Here are examples of the type of tips to provide:
                - Prioritize casual FIFO roles initially for flexibility and to test the waters without overcommitting.
                - Invest in essential tickets like the White Card and National Police Clearance early; they are your gateway to entry-level jobs.
                - Network actively on site with supervisors and workmates; connections can lead to better job opportunities and travel insights.
                - A manual driver's license can significantly boost your job prospects for many mining roles.
                - Embrace meal prepping during your R&R weeks to drastically cut food expenses compared to eating out.
                - Brew your coffee at home or in camp to save thousands annually on cafe visits.
                - Drastically cut back on vices like alcohol and cigarettes; they are major money drains in Australia.
                - Take advantage of free meals and extra crib packs from the worksite to save on groceries during R&R.
                - Consider not owning a car in Australia; use bikes, public transport, and ride-shares to save on transport costs.
                - Automate your savings by setting up direct deposits to a separate high-interest account.
                - Compartmentalize your money into different "buckets" (essentials, emergency, savings, fun, goals) for better financial control.
                - Utilize the camp gym consistently; it's vital for physical and mental well-being during long swings.
                - Daily stretching helps prevent aches and pains from long shifts and physical work.
                - Stay extremely hydrated on site; use the ice room often to avoid dehydration in the heat.
                - Be friendly, but choose your social circle wisely in camp to avoid unnecessary drama and stay focused.
                - Use your donga (room) as a personal sanctuary for rest, reading, or quiet planning.
                - Always have a current National Police Clearance ready; it's a common pre-employment requirement.
                - Prepare for pre-employment medicals by staying drug-free and maintaining good physical fitness.
                - Tailor your resume to highlight any transferable skills, even if not directly mining-related.
                - Learn to appreciate the simple comforts of camp life, like free food and amenities, to maintain a positive mindset.
                - Understand your tax obligations as a WHV holder and claim all eligible work-related deductions.
                - Look into the Departing Australia Superannuation Payment (DASP) for a potential bonus when you leave the country permanently.
                - Embrace solitude as an opportunity for self-reflection and personal development during your isolated periods.
                - Break down your $100K goal into smaller, manageable monthly or weekly targets to stay motivated.
                - Prioritize sleep and recovery during your R&R to avoid burnout and maintain peak performance.
                - Consider investing in quality, multi-purpose gear that transitions seamlessly between work and travel.
                - Explore geoarbitrage by spending your R&R in lower-cost countries like Bali to maximize savings.
                - Build a strong support network with family and friends back home through regular video calls.
                - View setbacks as lessons, not failures, and adapt your strategies as needed.
                - For more specialized roles, invest in specific tickets like Working at Heights or Confined Space Entry after gaining initial experience.`;

                // Initialize chat history with the user's prompt
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });

                // Prepare the payload for the API request
                const payload = { contents: chatHistory };

                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                // Make the fetch call to the Gemini API
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                // Check if the response was successful (status code 2xx)
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(`API error: ${response.status} ${response.statusText} - ${errorData.error.message}`);
                }

                // Parse the JSON response
                const result = await response.json();

                // Check if the response structure is as expected and extract the text
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const tip = result.candidates[0].content.parts[0].text;
                    tipDisplay.innerHTML = `<p>${tip}</p>`; // Display the AI-generated tip
                } else {
                    tipDisplay.innerHTML = `<p class="text-red-600">Error: Could not retrieve tip. The AI response was empty or malformed.</p>`;
                    console.error('Unexpected API response structure:', result);
                }
            } catch (error) {
                tipDisplay.innerHTML = `<p class="text-red-600">Failed to fetch tip. Please try again. Error: ${error.message}</p>`;
                console.error('Error fetching AI tip:', error);
            } finally {
                loadingIndicator.classList.add('hidden'); // Hide loading indicator
                getTipButton.disabled = false; // Re-enable button
            }
        });

        // --- Qualification Quiz Logic ---
        const quizQuestions = [
            {
                question: "Are you generally eligible for an Australian Working Holiday Visa (typically under 35, depending on nationality)?",
                options: ["Yes", "No"],
                qualifying: "Yes", // Answer that qualifies
                disqualifying: { "No": "The Working Holiday Visa is crucial for this path. Please check official eligibility requirements." }
            },
            {
                question: "Are you willing and flexible to relocate to Western Australia and work in remote mining areas?",
                options: ["Yes", "No"],
                qualifying: "Yes"
            },
            {
                question: "Do you have any serious criminal convictions that would prevent you from obtaining a police clearance or visa?",
                options: ["Yes", "No"],
                qualifying: "No", // "No" is the qualifying answer here
                disqualifying: { "Yes": "Serious criminal convictions can prevent visa and police clearance approval, which are essential for mining work." }
            },
            {
                question: "Are you prepared for physically demanding work and long shifts (e.g., 12 hours a day, 14 days straight)?",
                options: ["Yes", "No"],
                qualifying: "Yes"
            },
            {
                question: "Are you ready to embrace frugal living and prioritize saving a significant portion of your income?",
                options: ["Yes", "No"],
                qualifying: "Yes"
            },
            {
                question: "Are you comfortable with periods of isolation and being away from friends/family for weeks at a time?",
                options: ["Yes", "No"],
                qualifying: "Yes"
            }
        ];

        let currentQuestionIndex = 0;
        const userAnswers = {}; // Store user's answers

        const quizContent = document.getElementById('quizContent');
        const prevQuestionBtn = document.getElementById('prevQuestion');
        const nextQuestionBtn = document.getElementById('nextQuestion');
        const submitQuizBtn = document.getElementById('submitQuiz');
        const quizResultDiv = document.getElementById('quizResult');

        function displayQuestion() {
            quizContent.innerHTML = ''; // Clear previous question
            quizResultDiv.classList.add('hidden'); // Hide result if visible

            const q = quizQuestions[currentQuestionIndex];
            const questionHtml = `
                <p class="quiz-question">${currentQuestionIndex + 1}. ${q.question}</p>
                <div class="quiz-options mt-4">
                    ${q.options.map(option => `
                        <label class="flex items-center">
                            <input type="radio" name="question${currentQuestionIndex}" value="${option}" ${userAnswers[currentQuestionIndex] === option ? 'checked' : ''}>
                            ${option}
                        </label>
                    `).join('')}
                </div>
            `;
            quizContent.innerHTML = questionHtml;

            // Update navigation buttons
            prevQuestionBtn.classList.toggle('hidden', currentQuestionIndex === 0);
            nextQuestionBtn.classList.toggle('hidden', currentQuestionIndex === quizQuestions.length - 1);
            submitQuizBtn.classList.toggle('hidden', currentQuestionIndex !== quizQuestions.length - 1);
        }

        function calculateResults() {
            let qualifiedScore = 0;
            let disqualifyingReason = null;

            for (let i = 0; i < quizQuestions.length; i++) {
                const q = quizQuestions[i];
                const userAnswer = userAnswers[i];

                // Check for disqualifying answers first
                if (q.disqualifying && q.disqualifying[userAnswer]) {
                    disqualifyingReason = q.disqualifying[userAnswer];
                    break; // Exit loop if disqualified
                }

                // If not disqualified, check for qualifying answers
                if (userAnswer === q.qualifying) {
                    qualifiedScore++;
                }
            }

            let resultMessage = '';
            let resultColor = '';

            if (disqualifyingReason) {
                resultMessage = `**Important:** ${disqualifyingReason} This path might be challenging for you.`;
                resultColor = 'text-red-400';
            } else {
                if (qualifiedScore >= 5) { // 5-6 qualifying answers
                    resultMessage = "🎉 **Highly Qualified!** You seem perfectly suited for the 100K Mining Nomad lifestyle. Get ready for an incredible journey!";
                    resultColor = 'text-green-400';
                } else if (qualifiedScore >= 3) { // 3-4 qualifying answers
                    resultMessage = "👍 **Potentially Qualified!** You have many strengths for this path, with some areas to develop. Our guide can help you build confidence.";
                    resultColor = 'text-yellow-400';
                } else { // 0-2 qualifying answers
                    resultMessage = "🤔 **Consider if this path is right for you.** The 100K Mining Nomad journey requires significant commitment and adaptation. Our guide can offer insights if you're still exploring.";
                    resultColor = 'text-orange-400';
                }
            }

            quizResultDiv.innerHTML = `<p class="${resultColor}">${resultMessage}</p>`;
            quizResultDiv.classList.remove('hidden');
        }

        // Navigation event listeners
        prevQuestionBtn.addEventListener('click', () => {
            currentQuestionIndex--;
            displayQuestion();
        });

        nextQuestionBtn.addEventListener('click', () => {
            const selectedOption = document.querySelector(`input[name="question${currentQuestionIndex}"]:checked`);
            if (selectedOption) {
                userAnswers[currentQuestionIndex] = selectedOption.value;
                currentQuestionIndex++;
                displayQuestion();
            } else {
                alert("Please select an option before proceeding."); // Using alert for simplicity, consider a custom modal in production
            }
        });

        submitQuizBtn.addEventListener('click', () => {
            const selectedOption = document.querySelector(`input[name="question${currentQuestionIndex}"]:checked`);
            if (selectedOption) {
                userAnswers[currentQuestionIndex] = selectedOption.value;
                calculateResults();
                // Optionally hide quiz navigation after submit
                prevQuestionBtn.classList.add('hidden');
                nextQuestionBtn.classList.add('hidden');
                submitQuizBtn.classList.add('hidden');
            } else {
                alert("Please select an option before submitting."); // Using alert for simplicity, consider a custom modal in production
            }
        });

        // Initial display of the first question
        displayQuestion();
    </script>
</body>
</html>
